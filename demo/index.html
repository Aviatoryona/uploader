<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>title</title>
</head>
<body>
    <input id="select-file" type="file" multiple>
    <button id="upload">upload</button>
    <div class="content"></div>
    <script src="uploader.min.js" type="text/javascript"></script>
    <script type="text/javascript">
    var input = document.querySelector('#select-file');
    var btn = document.querySelector('#upload');
    var content = document.querySelector('.content');
    // var u = new Uploader({
    //     url: '/upload',
    //     params: {
    //         m: 'C',
    //         pub: 1,
    //         picType: 2
    //     },
    //     formData: {
    //         haha: 'hahahahaahah'
    //     },
    //     multiple: true,
    //     auto: true
    // });
    // u.init();
    // u.bind(btn);
    // u.on('progress', function (e, percent) {
    //     content.innerHTML = percent;
    // }).on('success', function (response) {
    //     content.innerHTML = JSON.stringify(response);
    // });
    // u.init();
    // u.addData('haha', 'yoyoyoyoyo');
    // u.limit = ['png', 'jpg'];
    // u.on('upload.success', function (data) {
    //     content.innerHTML = JSON.stringify(data);
    // }).on('upload.progress', function (event, percent) {
    //     content.innerHTML = percent;
    // }).on('upload.start', function () {
    //     console.log('start');
    // }).on('upload.addFile', function (f) {
    //     console.log('add file', f)
    // });
    input.addEventListener('change', function (event) {
        if (input.files.length) {
            var arr = [];
            for (var i in input.files) {
                if (input.files.hasOwnProperty(i)) {
                    arr.push(input.files[i]);
                }
            }
            var u = new Uploader({
                url: '/upload',
                params: {
                    m: 'C',
                    pub: 1,
                    picType: 2
                },
                formData: {
                    haha: 'hahahahaahah'
                },
                multiple: true,
                auto: true,
                files: arr,
                headers: {
                    test: 'testtesttest'
                }
            });
            u.on('upload.error', function () {
                console.log('ee');
            })
            // u.addFile('file', input.files[0], input.files[0].name);
            console.log(u);
        }
    });
    // btn.addEventListener('click', function () {
    //     // console.log(u.files);
    //     u.start();
    // });
    </script>
</body>
</html>